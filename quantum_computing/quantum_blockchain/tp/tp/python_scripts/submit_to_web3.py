import json
import web3
import sys

from web3 import Web3, HTTPProvider, Account

val_to_contract = sys.argv[1]

acct = Account.privateKeyToAccount("9e8c8de2f6a6dc82ad315c0f59d0a7571af9fafb5aeac89af87df2ffaca3e0c4")

# w3 = Web3(Web3.HTTPProvider("http://ethlugstr-dns-reg1.westus.cloudapp.azure.com:8540", request_kwargs={'timeout': 600}))
w3 = Web3(Web3.HTTPProvider("https://rinkeby.infura.io/v3/b98ea86c63844b23b07f48498659efd4", request_kwargs={'timeout': 600}))

w3.eth.defaultAccount = acct

w3.eth.getBlock('latest')

# Instantiate and deploy contract
contract = w3.eth.contract(address="0x4e834872B8ff9E7D34BDe2c91e78787BF350C8e9", 
                           abi='[{"constant":false,"inputs":[],"name":"Join","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"move","type":"uint8"}],"name":"Play","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"winner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"gameFinished","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"winner","type":"address"},{"indexed":false,"name":"winAmount","type":"uint256"}],"name":"EventGameEnded","type":"event"}]',
                           bytecode="608060405234801561001057600080fd5b50610028610048640100000000026401000000009004565b6000600260006101000a81548160ff021916908315150217905550610097565b60036000800160146101000a81548160ff0219169083600381111561006957fe5b02179055506003600160000160146101000a81548160ff0219169083600381111561009057fe5b0217905550565b610b32806100a66000396000f300608060405260043610610062576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063630b0dbf14610067578063b2c3609b14610071578063dfbf53ae146100a1578063f0f32497146100f8575b600080fd5b61006f610127565b005b34801561007d57600080fd5b5061009f600480360381019080803560ff169060200190929190505050610345565b005b3480156100ad57600080fd5b506100b661058a565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010457600080fd5b5061010d6105b0565b604051808215151515815260200191505060405180910390f35b600260009054906101000a900460ff1615151561014357600080fd5b600073ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614806101f35750600073ffffffffffffffffffffffffffffffffffffffff16600160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b15156101fe57600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561025d57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156102fe57336000800160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610343565b33600160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b565b61034d6105c3565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614806103fb57503373ffffffffffffffffffffffffffffffffffffffff16600160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b151561040657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156104bd5760038081111561046a57fe5b6000800160149054906101000a900460ff16600381111561048757fe5b14151561049357600080fd5b806000800160146101000a81548160ff021916908360038111156104b357fe5b021790555061051a565b6003808111156104c957fe5b600160000160149054906101000a900460ff1660038111156104e757fe5b1415156104f357600080fd5b80600160000160146101000a81548160ff0219169083600381111561051457fe5b02179055505b60038081111561052657fe5b6000800160149054906101000a900460ff16600381111561054357fe5b14158015610579575060038081111561055857fe5b600160000160149054906101000a900460ff16600381111561057657fe5b14155b156105875761058661069f565b5b50565b600260019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900460ff1681565b600073ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141580156106765750600073ffffffffffffffffffffffffffffffffffffffff16600160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614155b151561068157600080fd5b600260009054906101000a900460ff1615151561069d57600080fd5b565b60006003808111156106ad57fe5b6000800160149054906101000a900460ff1660038111156106ca57fe5b1415801561070057506003808111156106df57fe5b600160000160149054906101000a900460ff1660038111156106fd57fe5b14155b151561070b57600080fd5b6107386000800160149054906101000a900460ff16600160000160149054906101000a900460ff16610962565b905060038081111561074657fe5b81600381111561075257fe5b141561076557610760610ab7565b61095f565b6000800160149054906101000a900460ff16600381111561078257fe5b81600381111561078e57fe5b14156107fe576000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600260016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610865565b600160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600260016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b6001600260006101000a81548160ff0219169083151502179055507f8130dcc756cafeefb376fee7bc78d77afbc02b4f7062ac0aacc05dc1d6719a87600260019054906101000a900473ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff1631604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1600260019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b50565b600060038081111561097057fe5b83600381111561097c57fe5b141580156109a0575060038081111561099157fe5b82600381111561099d57fe5b14155b15156109ab57600080fd5b8160038111156109b757fe5b8360038111156109c357fe5b14156109d25760039050610ab1565b600060038111156109df57fe5b8360038111156109eb57fe5b148015610a0e575060016003811115610a0057fe5b826003811115610a0c57fe5b145b15610a1c5760019050610ab1565b60006003811115610a2957fe5b836003811115610a3557fe5b148015610a58575060026003811115610a4a57fe5b826003811115610a5657fe5b145b15610a665760009050610ab1565b60016003811115610a7357fe5b836003811115610a7f57fe5b148015610aa2575060026003811115610a9457fe5b826003811115610aa057fe5b145b15610ab05760029050610ab1565b5b92915050565b60036000800160146101000a81548160ff02191690836003811115610ad857fe5b02179055506003600160000160146101000a81548160ff02191690836003811115610aff57fe5b02179055505600a165627a7a72305820031679aee280ff9446d25452b1a23478226baa299944f06970ad3e57dbc532430029")

tx_hash = contract.deploy(transaction={'gas': 410000})


